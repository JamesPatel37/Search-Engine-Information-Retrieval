{
  "{\"filename\":\"C:/Users/Jaymin/Downloads/kibana-4.4.1-windows/installedPlugins/sense/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.23": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function (kibana) {\n  var _require = require('path');\n\n  var resolve = _require.resolve;\n  var join = _require.join;\n  var sep = _require.sep;\n\n  var Joi = require('joi');\n  var Boom = require('boom');\n  var modules = resolve(__dirname, 'public/webpackShims/');\n  var src = resolve(__dirname, 'public/src/');\n\n  var _require2 = require('fs');\n\n  var existsSync = _require2.existsSync;\n\n  var _require3 = require('lodash');\n\n  var startsWith = _require3.startsWith;\n  var endsWith = _require3.endsWith;\n\n  var apps = [{\n    title: 'Sense',\n    description: 'JSON aware developer\\'s interface to ElasticSearch',\n    icon: 'plugins/sense/bonsai.png',\n    main: 'plugins/sense/sense',\n    autoload: kibana.autoload.styles,\n    injectVars: function injectVars(server, options) {\n      return options;\n    }\n  }];\n\n  if (existsSync(resolve(__dirname, 'public/tests'))) {\n    apps.push({\n      title: 'Sense Tests',\n      id: 'sense-tests',\n      main: 'plugins/sense/tests',\n      hidden: true\n      //listed: false // uncomment after https://github.com/elastic/kibana/pull/4755\n    });\n  }\n\n  return new kibana.Plugin({\n    id: 'sense',\n\n    config: function config(Joi) {\n      return Joi.object({\n        enabled: Joi.boolean()['default'](true),\n        defaultServerUrl: Joi.string()['default']('http://localhost:9200'),\n        proxyFilter: Joi.array().items(Joi.string()).single()['default'](['.*']),\n        ssl: Joi.object({\n          verify: Joi.boolean()['default'](true)\n        })['default']()\n      })['default']();\n    },\n\n    init: function init(server, options) {\n      var filters = options.proxyFilter.map(function (str) {\n        return new RegExp(str);\n      });\n\n      // http://hapijs.com/api/8.8.1#route-configuration\n      server.route({\n        path: '/api/sense/proxy',\n        method: ['*', 'GET'],\n        config: {\n          handler: {\n            proxy: {\n              mapUri: function mapUri(req, cb) {\n                var uri = req.query.uri;\n\n                if (!uri) {\n                  cb(Boom.badRequest('URI is a required param.'));\n                  return;\n                }\n\n                if (!filters.some(function (re) {\n                  return re.test(uri);\n                })) {\n                  var err = Boom.forbidden();\n                  err.output.payload = \"Error connecting to '\" + uri + \"':\\n\\nUnable to send requests to that url.\";\n                  err.output.headers['content-type'] = 'text/plain';\n                  cb(err);\n                  return;\n                }\n\n                cb(null, uri);\n              },\n              rejectUnauthorized: options.ssl.verify,\n              passThrough: true,\n              xforward: true,\n              onResponse: function onResponse(err, res, request, reply, settings, ttl) {\n                if (err != null) {\n                  reply(\"Error connecting to '\" + request.query.uri + \"':\\n\\n\" + err.message).type(\"text/plain\").statusCode = 502;\n                } else {\n                  reply(null, res);\n                }\n              }\n            }\n          }\n        }\n      });\n\n      server.route({\n        path: '/api/sense/api_server',\n        method: ['GET', 'POST'],\n        handler: function handler(req, reply) {\n          var server = require('./api_server/server');\n          var _req$query = req.query;\n          var sense_version = _req$query.sense_version;\n          var apis = _req$query.apis;\n\n          if (!apis) {\n            reply(Boom.badRequest('\"apis\" is a required param.'));\n            return;\n          }\n\n          return server.resolveApi(sense_version, apis.split(\",\"), reply);\n        }\n      });\n\n      var testApp = kibana.uiExports.apps.hidden.byId['sense-tests'];\n      if (testApp) {\n        server.route({\n          path: '/app/sense-tests',\n          method: 'GET',\n          handler: function handler(req, reply) {\n            return reply.renderApp(testApp);\n          }\n        });\n      }\n    },\n\n    uiExports: {\n      apps: apps,\n\n      noParse: [join(modules, 'ace' + sep), join(modules, 'moment_src/moment' + sep), join(src, 'sense_editor/mode/worker.js')]\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6L1VzZXJzL0pheW1pbi9Eb3dubG9hZHMva2liYW5hLTQuNC4xLXdpbmRvd3MvaW5zdGFsbGVkUGx1Z2lucy9zZW5zZS9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxNQUFNLEVBQUU7aUJBQ0osT0FBTyxDQUFDLE1BQU0sQ0FBQzs7TUFBdEMsT0FBTyxZQUFQLE9BQU87TUFBRSxJQUFJLFlBQUosSUFBSTtNQUFFLEdBQUcsWUFBSCxHQUFHOztBQUN4QixNQUFJLEdBQUcsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDekIsTUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzNCLE1BQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztBQUN6RCxNQUFJLEdBQUcsR0FBRyxPQUFPLENBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxDQUFDOztrQkFDdkIsT0FBTyxDQUFDLElBQUksQ0FBQzs7TUFBNUIsVUFBVSxhQUFWLFVBQVU7O2tCQUNpQixPQUFPLENBQUMsUUFBUSxDQUFDOztNQUExQyxVQUFVLGFBQVYsVUFBVTtNQUFFLFFBQVEsYUFBUixRQUFROztBQUU1QixNQUFNLElBQUksR0FBRyxDQUNYO0FBQ0UsU0FBSyxFQUFFLE9BQU87QUFDZCxlQUFXLEVBQUUsb0RBQW9EO0FBQ2pFLFFBQUksRUFBRSwwQkFBMEI7QUFDaEMsUUFBSSxFQUFFLHFCQUFxQjtBQUMzQixZQUFRLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNO0FBQ2hDLGNBQVUsRUFBRSxvQkFBVSxNQUFNLEVBQUUsT0FBTyxFQUFFO0FBQ3JDLGFBQU8sT0FBTyxDQUFDO0tBQ2hCO0dBQ0YsQ0FDRixDQUFDOztBQUVGLE1BQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsY0FBYyxDQUFDLENBQUMsRUFBRTtBQUNsRCxRQUFJLENB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TyxFQUFFLENBQ1AsSUFBSSxDQUFDLE9BQU8sRUFBRSxLQUFLLEdBQUcsR0FBRyxDQUFDLEVBQzFCLElBQUksQ0FBQyxPQUFPLEVBQUUsbUJBQW1CLEdBQUcsR0FBRyxDQUFDLEVBQ3hDLElBQUksQ0FBQyxHQUFHLEVBQUUsNkJBQTZCLENBQUMsQ0FDekM7S0FDRjtHQUNGLENBQUMsQ0FBQTtDQUNILENBQUMiLCJmaWxlIjoiQzovVXNlcnMvSmF5bWluL0Rvd25sb2Fkcy9raWJhbmEtNC40LjEtd2luZG93cy9pbnN0YWxsZWRQbHVnaW5zL3NlbnNlL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2liYW5hKSB7XG4gIGxldCB7IHJlc29sdmUsIGpvaW4sIHNlcCB9ID0gcmVxdWlyZSgncGF0aCcpO1xuICBsZXQgSm9pID0gcmVxdWlyZSgnam9pJyk7XG4gIGxldCBCb29tID0gcmVxdWlyZSgnYm9vbScpO1xuICBsZXQgbW9kdWxlcyA9IHJlc29sdmUoX19kaXJuYW1lLCAncHVibGljL3dlYnBhY2tTaGltcy8nKTtcbiAgbGV0IHNyYyA9IHJlc29sdmUoX19kaXJuYW1lLCAncHVibGljL3NyYy8nKTtcbiAgbGV0IHsgZXhpc3RzU3luYyB9ID0gcmVxdWlyZSgnZnMnKTtcbiAgY29uc3QgeyBzdGFydHNXaXRoLCBlbmRzV2l0aCB9ID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbiAgY29uc3QgYXBwcyA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogJ1NlbnNlJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnSlNPTiBhd2FyZSBkZXZlbG9wZXJcXCdzIGludGVyZmFjZSB0byBFbGFzdGljU2VhcmNoJyxcbiAgICAgIGljb246ICdwbHVnaW5zL3NlbnNlL2JvbnNhaS5wbmcnLFxuICAgICAgbWFpbjogJ3BsdWdpbnMvc2Vuc2Uvc2Vuc2UnLFxuICAgICAgYXV0b2xvYWQ6IGtpYmFuYS5hdXRvbG9hZC5zdHlsZXMsXG4gICAgICBpbmplY3RWYXJzOiBmdW5jdGlvbiAoc2VydmVyLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgfVxuICAgIH1cbiAgXTtcblxuICBpZiAoZXhpc3RzU3luYyhyZXNvbHZlKF9fZGlybmFtZSwgJ3B1YmxpYy90ZXN0cycpKSkge1xuICAgIGFwcHMucHVzaCh7XG4gICAgICB0aXRsZTogJ1NlbnNlIFRlc3RzJyxcbiAgICAgIGlkOiAnc2Vuc2UtdGVzdHMnLFxuICAgICAgbWFpbjogJ3BsdWdpbnMvc2Vuc2UvdGVzdHMnLFxuICAgICAgaGlkZGVuOiB0cnVlXG4gICAgICAvL2xpc3RlZDogZmFsc2UgLy8gdW5jb21tZW50IGFmdGVyIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGFzdGljL2tpYmFuYS9wdWxsLzQ3NTVcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBuZXcga2liYW5hLlBsdWdpbih7XG4gICAgaWQ6ICdzZW5zZScsXG5cbiAgICBjb25maWc6IGZ1bmN0aW9uIChKb2kpIHtcbiAgICAgIHJldHVybiBKb2kub2JqZWN0KHtcbiAgICAgICAgZW5hYmxlZDogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuICAgICAgICBkZWZhdWx0U2VydmVyVXJsOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnaHR0cDovL2xvY2FsaG9zdDo5MjAwJyksXG4gICAgICAgIHByb3h5RmlsdGVyOiBKb2kuYXJyYXkoKS5pdGVtcyhKb2kuc3RyaW5nKCkpLnNpbmdsZSgpLmRlZmF1bHQoWycuKiddKSxcbiAgICAgICAgc3NsOiBKb2kub2JqZWN0KHtcbiAgICAgICAgICB2ZXJpZnk6IEpvaS5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgICAgfSkuZGVmYXVsdCgpLFxuICAgICAgfSkuZGVmYXVsdCgpO1xuICAgIH0sXG5cbiAgICBpbml0OiBmdW5jdGlvbiAoc2VydmVyLCBvcHRpb25zKSB7XG4gICAgICBjb25zdCBmaWx0ZXJzID0gb3B0aW9ucy5wcm94eUZpbHRlci5tYXAoc3RyID0+IG5ldyBSZWdFeHAoc3RyKSk7XG5cbiAgICAgIC8vIGh0dHA6Ly9oYXBpanMuY29tL2FwaS84LjguMSNyb3V0ZS1jb25maWd1cmF0aW9uXG4gICAgICBzZXJ2ZXIucm91dGUoe1xuICAgICAgICBwYXRoOiAnL2FwaS9zZW5zZS9wcm94eScsXG4gICAgICAgIG1ldGhvZDogWycqJywgJ0dFVCddLFxuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICBoYW5kbGVyOiB7XG4gICAgICAgICAgICBwcm94eToge1xuICAgICAgICAgICAgICBtYXBVcmk6IGZ1bmN0aW9uIChyZXEsIGNiKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgdXJpIH0gPSByZXEucXVlcnk7XG4gICAgICAgICAgICAgICAgaWYgKCF1cmkpIHtcbiAgICAgICAgICAgICAgICAgIGNiKEJvb20uYmFkUmVxdWVzdCgnVVJJIGlzIGEgcmVxdWlyZWQgcGFyYW0uJykpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghZmlsdGVycy5zb21lKHJlID0+IHJlLnRlc3QodXJpKSkpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IEJvb20uZm9yYmlkZGVuKCk7XG4gICAgICAgICAgICAgICAgICBlcnIub3V0cHV0LnBheWxvYWQgPSBcIkVycm9yIGNvbm5lY3RpbmcgdG8gJ1wiICsgdXJpICsgXCInOlxcblxcblVuYWJsZSB0byBzZW5kIHJlcXVlc3RzIHRvIHRoYXQgdXJsLlwiO1xuICAgICAgICAgICAgICAgICAgZXJyLm91dHB1dC5oZWFkZXJzWydjb250ZW50LXR5cGUnXSA9ICd0ZXh0L3BsYWluJztcbiAgICAgICAgICAgICAgICAgIGNiKGVycik7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2IobnVsbCwgdXJpKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBvcHRpb25zLnNzbC52ZXJpZnksXG4gICAgICAgICAgICAgIHBhc3NUaHJvdWdoOiB0cnVlLFxuICAgICAgICAgICAgICB4Zm9yd2FyZDogdHJ1ZSxcbiAgICAgICAgICAgICAgb25SZXNwb25zZTogZnVuY3Rpb24gKGVyciwgcmVzLCByZXF1ZXN0LCByZXBseSwgc2V0dGluZ3MsIHR0bCkge1xuICAgICAgICAgICAgICAgIGlmIChlcnIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgcmVwbHkoXCJFcnJvciBjb25uZWN0aW5nIHRvICdcIiArIHJlcXVlc3QucXVlcnkudXJpICsgXCInOlxcblxcblwiICsgZXJyLm1lc3NhZ2UpLnR5cGUoXCJ0ZXh0L3BsYWluXCIpLnN0YXR1c0NvZGUgPSA1MDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJlcGx5KG51bGwsIHJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc2VydmVyLnJvdXRlKHtcbiAgICAgICAgcGF0aDogJy9hcGkvc2Vuc2UvYXBpX3NlcnZlcicsXG4gICAgICAgIG1ldGhvZDogWydHRVQnLCAnUE9TVCddLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAocmVxLCByZXBseSkge1xuICAgICAgICAgIGxldCBzZXJ2ZXIgPSByZXF1aXJlKCcuL2FwaV9zZXJ2ZXIvc2VydmVyJyk7XG4gICAgICAgICAgbGV0IHtzZW5zZV92ZXJzaW9uLCBhcGlzfSA9IHJlcS5xdWVyeTtcbiAgICAgICAgICBpZiAoIWFwaXMpIHtcbiAgICAgICAgICAgIHJlcGx5KEJvb20uYmFkUmVxdWVzdCgnXCJhcGlzXCIgaXMgYSByZXF1aXJlZCBwYXJhbS4nKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHNlcnZlci5yZXNvbHZlQXBpKHNlbnNlX3ZlcnNpb24sIGFwaXMuc3BsaXQoXCIsXCIpLCByZXBseSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB0ZXN0QXBwID0ga2liYW5hLnVpRXhwb3J0cy5hcHBzLmhpZGRlbi5ieUlkWydzZW5zZS10ZXN0cyddO1xuICAgICAgaWYgKHRlc3RBcHApIHtcbiAgICAgICAgc2VydmVyLnJvdXRlKHtcbiAgICAgICAgICBwYXRoOiAnL2FwcC9zZW5zZS10ZXN0cycsXG4gICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAocmVxLCByZXBseSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcGx5LnJlbmRlckFwcCh0ZXN0QXBwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB1aUV4cG9ydHM6IHtcbiAgICAgIGFwcHM6IGFwcHMsXG5cbiAgICAgIG5vUGFyc2U6IFtcbiAgICAgICAgam9pbihtb2R1bGVzLCAnYWNlJyArIHNlcCksXG4gICAgICAgIGpvaW4obW9kdWxlcywgJ21vbWVudF9zcmMvbW9tZW50JyArIHNlcCksXG4gICAgICAgIGpvaW4oc3JjLCAnc2Vuc2VfZWRpdG9yL21vZGUvd29ya2VyLmpzJylcbiAgICAgIF1cbiAgICB9XG4gIH0pXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "C:/Users/Jaymin/Downloads/kibana-4.4.1-windows/installedPlugins/sense/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "C:/Users/Jaymin/Downloads/kibana-4.4.1-windows/installedPlugins/sense/index.js",
      "sourcesContent": [
        "module.exports = function (kibana) {\n  let { resolve, join, sep } = require('path');\n  let Joi = require('joi');\n  let Boom = require('boom');\n  let modules = resolve(__dirname, 'public/webpackShims/');\n  let src = resolve(__dirname, 'public/src/');\n  let { existsSync } = require('fs');\n  const { startsWith, endsWith } = require('lodash');\n\n  const apps = [\n    {\n      title: 'Sense',\n      description: 'JSON aware developer\\'s interface to ElasticSearch',\n      icon: 'plugins/sense/bonsai.png',\n      main: 'plugins/sense/sense',\n      autoload: kibana.autoload.styles,\n      injectVars: function (server, options) {\n        return options;\n      }\n    }\n  ];\n\n  if (existsSync(resolve(__dirname, 'public/tests'))) {\n    apps.push({\n      title: 'Sense Tests',\n      id: 'sense-tests',\n      main: 'plugins/sense/tests',\n      hidden: true\n      //listed: false // uncomment after https://github.com/elastic/kibana/pull/4755\n    });\n  }\n\n  return new kibana.Plugin({\n    id: 'sense',\n\n    config: function (Joi) {\n      return Joi.object({\n        enabled: Joi.boolean().default(true),\n        defaultServerUrl: Joi.string().default('http://localhost:9200'),\n        proxyFilter: Joi.array().items(Joi.string()).single().default(['.*']),\n        ssl: Joi.object({\n          verify: Joi.boolean().default(true),\n        }).default(),\n      }).default();\n    },\n\n    init: function (server, options) {\n      const filters = options.proxyFilter.map(str => new RegExp(str));\n\n      // http://hapijs.com/api/8.8.1#route-configuration\n      server.route({\n        path: '/api/sense/proxy',\n        method: ['*', 'GET'],\n        config: {\n          handler: {\n            proxy: {\n              mapUri: function (req, cb) {\n                let { uri } = req.query;\n                if (!uri) {\n                  cb(Boom.badRequest('URI is a required param.'));\n                  return;\n                }\n\n                if (!filters.some(re => re.test(uri))) {\n                  const err = Boom.forbidden();\n                  err.output.payload = \"Error connecting to '\" + uri + \"':\\n\\nUnable to send requests to that url.\";\n                  err.output.headers['content-type'] = 'text/plain';\n                  cb(err);\n                  return;\n                }\n\n                cb(null, uri);\n              },\n              rejectUnauthorized: options.ssl.verify,\n              passThrough: true,\n              xforward: true,\n              onResponse: function (err, res, request, reply, settings, ttl) {\n                if (err != null) {\n                  reply(\"Error connecting to '\" + request.query.uri + \"':\\n\\n\" + err.message).type(\"text/plain\").statusCode = 502;\n                } else {\n                  reply(null, res);\n                }\n              }\n            }\n          }\n        }\n      });\n\n      server.route({\n        path: '/api/sense/api_server',\n        method: ['GET', 'POST'],\n        handler: function (req, reply) {\n          let server = require('./api_server/server');\n          let {sense_version, apis} = req.query;\n          if (!apis) {\n            reply(Boom.badRequest('\"apis\" is a required param.'));\n            return;\n          }\n\n          return server.resolveApi(sense_version, apis.split(\",\"), reply);\n        }\n      });\n\n      const testApp = kibana.uiExports.apps.hidden.byId['sense-tests'];\n      if (testApp) {\n        server.route({\n          path: '/app/sense-tests',\n          method: 'GET',\n          handler: function (req, reply) {\n            return reply.renderApp(testApp);\n          }\n        });\n      }\n    },\n\n    uiExports: {\n      apps: apps,\n\n      noParse: [\n        join(modules, 'ace' + sep),\n        join(modules, 'moment_src/moment' + sep),\n        join(src, 'sense_editor/mode/worker.js')\n      ]\n    }\n  })\n};\n"
      ]
    },
    "mtime": 1457201456986
  }
}